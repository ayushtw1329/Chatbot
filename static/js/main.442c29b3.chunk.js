(this.webpackJsonpchatbot=this.webpackJsonpchatbot||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(7),s=n.n(r),o=(n(13),n(14),n(2)),i=n.n(o),u=n(4),l=n(3),j=n.p+"static/media/expand.49d5aa33.svg",b=n(8),d=n(0);function p(e){var t=e.fetchMessage,n=e.onAddtoCart,a=void 0===n?function(){}:n,r=Object(c.useState)(!0),s=Object(l.a)(r,2),o=s[0],p=s[1],f=Object(c.useState)(),h=Object(l.a)(f,2),m=h[0],O=h[1],v=Object(c.useState)(0),x=Object(l.a)(v,2),g=x[0],w=x[1],N=Object(c.useState)(!1),S=Object(l.a)(N,2),y=S[0],k=S[1],C=Object(c.useState)(),I=Object(l.a)(C,2),L=I[0],M=I[1];Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(i.a.mark((function e(){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n=e.sent,p(!1),!n||"IMAGE_URL_LIST"!==n.label&&"IMAGE_URL"!==n.label?O(n):(c=[],[n.value].map((function(e){return c.push(e)})),O(n),M(c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var T=Object(c.useCallback)((function(e){w(e),k(!0)}),[]);return Object(d.jsx)("div",{className:"message bot-message",children:Object(d.jsx)(d.Fragment,{children:o?Object(d.jsx)("div",{className:"dot-elastic"}):!m||"IMAGE_URL_LIST"!==m.label&&"IMAGE_URL"!==m.label?m&&"LIST"===m.label?Object(d.jsx)("ul",{className:"options",children:m.value.map((function(e,t){return Object(d.jsxs)("li",{className:"option",children:[Object(d.jsx)("div",{className:"item",children:Object(d.jsx)("span",{children:e.stringValue})}),Object(d.jsx)("button",{className:"btn addtBtn",onClick:function(){return a()},children:"Add"})]},t)}))}):m&&m.value:Object(d.jsxs)("div",{className:"menu-wrapper",children:[Object(d.jsxs)("div",{className:"menu-options",children:[L&&L.length&&L.map((function(e,t){return Object(d.jsx)("span",{className:"menu-option",children:Object(d.jsx)("img",{src:e,onClick:function(){return T(t)},alt:"Menu",height:"200"})},t)})),y&&Object(d.jsx)(b.a,{src:L,currentIndex:g,onClose:function(){w(0),k(!1)},disableScroll:!1,backgroundStyle:{backgroundColor:"rgba(0,0,0,0.9)"},closeOnClickOutside:!0})]}),Object(d.jsx)("button",{className:"expandBtn",onClick:function(){return T(0)},children:Object(d.jsx)("img",{src:j,alt:"Expand Icon"})})]})})})}function f(e){var t=e.text;return Object(d.jsx)("div",{className:"message user-message",children:t})}var h=n.p+"static/media/bot-icon.795fa940.svg",m=n.p+"static/media/user-icon.20ebf0b4.svg";function O(e){var t=e.messages,n=Object(c.useRef)(null);return Object(c.useEffect)((function(){n.current.scrollIntoView({block:"end",behavior:"smooth"})})),Object(d.jsxs)("div",{className:"chatArea",children:[Object(d.jsx)("span",{className:"bot-icon",children:Object(d.jsx)("img",{src:h,alt:"Chat Bot Icon"})}),Object(d.jsxs)("div",{className:"chatMessages",children:[t,Object(d.jsx)("div",{id:"el",ref:n})]}),Object(d.jsx)("span",{className:"user-icon",children:Object(d.jsx)("img",{src:m,alt:"User Icon"})})]})}var v=n.p+"static/media/mic-icon.74710990.svg",x=n.p+"static/media/default_mic.5ed071ef.svg",g=n(6),w=n.n(g),N=(function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){setTimeout((function(){var n=N(t);e(n)}),2e3)})));case 1:case"end":return e.stop()}}),e)})))}(),function(e){return e&&"hi"===e.toLowerCase()||"hello"===e.toLowerCase()?"Welcome to Pizzazza!":"help"===e?"How may i help you":"Show me the dominos menu"===e?{type:"image",isMenu:!0}:"Sorry! I didn't understand"}),S=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://inference.vakyansh.in/alt/asr/en",{method:"POST",cors:"no-cors",body:JSON.stringify({audio:[{audioContent:t}]}),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3000/chatbot",{method:"POST",cors:"no-cors",body:JSON.stringify({message:t}),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(c=e.sent,a={value:null,label:""},!(c&&c.message&&c.message.response&&c.message.type)){e.next=14;break}return a.value="LIST"===c.message.type.stringValue?c.message.response.listValue.values:c.message.response.stringValue,a.label=c.message.type.stringValue,e.abrupt("return",a);case 14:a.label="TEXT",a.value="Sorry Artisan! I didn't get you. Could you repeat?";case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log("Error",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var t=e.onSend,n=Object(c.useState)(""),a=Object(l.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(""),j=Object(l.a)(o,2)[1],b=Object(c.useState)(!1),p=Object(l.a)(b,2),f=p[0],h=p[1],m=Object(c.useState)(!0),O=Object(l.a)(m,2),N=O[0],y=O[1],k=Object(c.useRef)(),C=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 3:t=e.sent,k.current=new w.a(t,{type:"audio",recorderType:g.StereoAudioRecorder,bufferSize:256,desiredSampRate:1e4,bitsPerSecond:128e3,numberOfAudioChannels:1,disableLogs:!0}),k.current.startRecording(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log((e.t0,"Error"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(e){return new Promise((function(t,n){var c=new FileReader;c.onloadend=function(){return t(c.result)},c.readAsDataURL(e)}))},L=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return n=e.sent,c=n.split(",")[1],e.prev=4,e.next=7,S(c);case 7:(a=e.sent)&&a.output&&a.output.length&&s(a.output[0].source),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("Error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("form",{className:"input-form",onSubmit:function(e){e.preventDefault(),r&&r.length&&(t(r),s(""))},children:Object(d.jsx)("input",{className:"user-input",type:"text",onChange:function(e){s(e.target.value)},value:r,placeholder:"Type Message"})}),N&&Object(d.jsx)("button",{className:"speak cursor-pointer",onClick:function(){h(!0),y(!1),C()},children:Object(d.jsx)("img",{src:x,alt:"Mic Icon",height:"30"})}),f&&Object(d.jsxs)("div",{className:"recorder-container ml-auto align-middle",children:[Object(d.jsx)("div",{className:"outer"}),Object(d.jsx)("div",{className:"outer-2"}),Object(d.jsx)("button",{className:"speak cursor-pointer",onClick:function(){h(!1),y(!0),k.current.stopRecording((function(){var e=URL.createObjectURL(k.current.getBlob());j(e),L(k.current.getBlob())}))},children:Object(d.jsx)("img",{src:v,alt:"Mic Icon",height:"30"})})]})]})},C=n.p+"static/media/cart-icon.dc4fcdb7.svg";function I(e){var t=e.count;return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("h1",{className:"logo",children:"Pizzazza"}),Object(d.jsx)("div",{className:"header-right",children:Object(d.jsxs)("div",{className:"cart",children:[Object(d.jsx)("img",{src:C,alt:"Cart"}),t?Object(d.jsx)("span",{className:"count",children:t}):null]})})]})}var L=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(0),s=Object(l.a)(r,2),o=s[0],j=s[1];Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a([Object(d.jsx)(p,{fetchMessage:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("hi");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},"0")]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var b=function(){var e=Object(u.a)(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n.concat(Object(d.jsx)(f,{text:t},n.length+1),Object(d.jsx)(p,{fetchMessage:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),onAddtoCart:function(){return j((function(e){return e+1}))}},n.length+2)),a(c);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(I,{count:o}),Object(d.jsxs)("main",{className:"wrapper",children:[Object(d.jsx)(O,{messages:n}),Object(d.jsx)("div",{className:"sep"}),Object(d.jsx)("div",{className:"chatFooter",children:Object(d.jsx)(k,{onSend:b})})]})]})},M=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(L,{})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(M,{})}),document.getElementById("root")),T()}},[[19,1,2]]]);
//# sourceMappingURL=main.442c29b3.chunk.js.map